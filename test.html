<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        /**
 * Analyze text from a transcribed customer call
 */
        var url = "https://api-labs.symbl.ai/v1/process/text?enableSummary=true";

        // Set headers 
        var headers = new Headers();
        headers.append('Content-Type', 'application/json');
        headers.append('Authorization', 'Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IlFVUTRNemhDUVVWQk1rTkJNemszUTBNMlFVVTRRekkyUmpWQ056VTJRelUxUTBVeE5EZzFNUSJ9.eyJodHRwczovL3BsYXRmb3JtLnN5bWJsLmFpL3VzZXJJZCI6IjU0NTYwNDI1MjA0Nzc2OTYiLCJpc3MiOiJodHRwczovL2RpcmVjdC1wbGF0Zm9ybS5hdXRoMC5jb20vIiwic3ViIjoiVFZ2QmpVbG9BaW5hdnRDdlVzRFBnTE1ocEozbEgwcmZAY2xpZW50cyIsImF1ZCI6Imh0dHBzOi8vcGxhdGZvcm0ucmFtbWVyLmFpIiwiaWF0IjoxNjQyNTM4NzM2LCJleHAiOjE2NDI2MjUxMzYsImF6cCI6IlRWdkJqVWxvQWluYXZ0Q3ZVc0RQZ0xNaHBKM2xIMHJmIiwiZ3R5IjoiY2xpZW50LWNyZWRlbnRpYWxzIn0.t2HSS0zKQrtmsqoYefYC1tPjEqDfSFowpKC08kgO0M82d8n4NZlEjLL3oX3_A8gfD2EHJKtGAaXNa3a0mq_zZqlvZ-HI7dPhQExOt5_vfG3ec33LizpCveoMQDZhRBRS2rEGiIUvUTcgMjrUj8aU_yFBSrpzwOiskCo3Vyoszog55VEsIDryLqqE74ypCerH_ey6D8vb9l4Z2SRzipi3M92kPsGl6SDUzt6vfsUuzR9uTHcVIdYMqVn1aWNPQZCVdhtoxlpwQUucUA_oipRipguWE8bJYwtDlyjP-1z4iiYRuIGLnabbMBrKy3Y8TmlV6KnIwXp2UeaIVsdo0df3rw');
        var body = {
            "messages": [
                {
                    "payload": {
                        "content": "Hi Anthony. I saw your complaints about bad call reception on your mobile phone. Can I know what issues you are currently facing?"
                    },
                    "from": {
                        "userId": "surbhi@example.com",
                        "name": "Surbhi Rathore"
                    },
                    "duration": {
                        "startTime": "2020-07-21T16:02:19.01Z",
                        "endTime": "2020-07-21T16:02:32.99Z"
                    }
                },
                {
                    "payload": {
                        "content": "Hey Surbhi, thanks for reaching out. Whenever I am picking up the call there is a lot of white noise and I literally canâ€™t hear anything."
                    },
                    "from": {
                        "userId": "anthony@example.com",
                        "name": "Anthony Claudia"
                    },
                    "duration": {
                        "startTime": "2020-07-21T16:02:33.99Z",
                        "endTime": "2020-07-21T16:02:45.99Z"
                    }
                },
                {
                    "payload": {
                        "content": "Okay. I can schedule a visit from one of our technicians for tomorrow afternoon at 1:00 PM. He can look at your mobile and handle any issue right away"
                    },
                    "from": {
                        "userId": "surbhi@example.com",
                        "name": "Surbhi Rathore"
                    },
                    "duration": {
                        "startTime": "2020-07-21T16:02:46.99Z",
                        "endTime": "2020-07-21T16:03:05.99Z"
                    }
                },
                {
                    "payload": {
                        "content": "That will be really helpful. I'll follow up with the technician about some other issues too, tomorrow"
                    },
                    "from": {
                        "userId": "anthony@example.com",
                        "name": "Anthony Claudia"
                    },
                    "duration": {
                        "startTime": "2020-07-21T16:03:17.01Z",
                        "endTime": "2020-07-21T16:03:27.99Z"
                    }
                },
                {
                    "payload": {
                        "content": "Sure. We are happy to help. I am scheduling the visit for tomorrow. Thanks for using Abccorp networks. Have a good day."
                    },
                    "from": {
                        "userId": "surbhi@example.com",
                        "name": "Surbhi Rathore"
                    },
                    "duration": {
                        "startTime": "2020-07-21T16:03:30.01Z",
                        "endTime": "2020-07-21T16:03:40.99Z"
                    }
                }
            ]
        }
        var data = {
            method: "POST",
            headers: headers,
        };
        data['body'] = JSON.stringify(body);
        var request = new Request(url, data);
        fetch(request)
            .then(response => {
                console.log('response', response);
                if (response.status >= 200 && response.status < 400) {
                    return response.json();
                } else {
                    throw new Error('Something went wrong on api server!');
                }
            })
            .then(response => {
                console.log('Success',response);
                // ...
            }).catch(error => {
                console.error(error);
            });
    </script>

</body>

</html>